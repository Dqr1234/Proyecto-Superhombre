# CenaCheck

Personal fitness and nutrition tracker focused on dinner evaluation. Built with Next.js 14 (App Router), TypeScript, and Supabase.

## Features
- Log dinner photos and macro quality.
- Automatic verdict logic (ACERCA / MANTIENE / FRENA).
- History feed with photo thumbnails.
- Stats for ACERCA percentage and streak.
- PWA-ready with manifest + service worker.
- Mobile-first dark UI.

## Tech Stack
- Next.js 14 (App Router) + TypeScript
- Supabase (PostgreSQL + Storage)

## Environment Variables
Create a `.env.local` file:

```
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

## Supabase Setup

### 1) Create tables
Run this SQL in the Supabase SQL editor:

```sql
create table if not exists days (
  id bigint generated by default as identity primary key,
  date date unique not null,
  day_type text not null,
  sleep_hours numeric,
  notes text
);

create table if not exists meals (
  id bigint generated by default as identity primary key,
  day_id bigint references days(id) not null,
  photo_url text,
  protein_level text not null,
  carb_level text not null,
  quality text not null
);
```

### 2) Storage bucket
Create a public storage bucket called **meal_photos**.

### 3) RLS
If you enable Row Level Security, add policies to allow insert/select for your auth strategy.

## Run Locally

```bash
npm install
npm run dev
```

## Deploy to Vercel
1. Push the repo to GitHub.
2. Create a new Vercel project and import the repo.
3. Add environment variables in Vercel:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
4. Deploy.

## Notes
- The service worker is registered on the client and provides basic caching for core routes.
- Supabase storage URLs are stored as public URLs in the `photo_url` column.
